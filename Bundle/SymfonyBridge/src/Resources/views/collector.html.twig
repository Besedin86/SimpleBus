{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% if collector.hasItems %}
        {% set icon %}
            {% include '@SimpleBusCommandBus/icon.html.twig' with {height: 25} only %}
            <span class="sf-toolbar-value">SimpleBus</span>
        {% endset %}

        {% set text %}
            <div class="sf-toolbar-info-piece">
                <b>Commands</b>
                <span class="sf-toolbar-status sf-toolbar-status-grey">{{ collector.commands | length }}</span>
            </div>

            <div class="sf-toolbar-info-piece">
                <b>Events</b>
                <span class="sf-toolbar-status sf-toolbar-status-grey">{{ collector.events | length }}</span>
            </div>
        {% endset %}

        {{ include('@WebProfiler/Profiler/toolbar_item.html.twig', { link: true }) }}
    {% endif %}
{% endblock %}

{% block menu %}
    <span class="label">
        <span class="icon">{% include '@SimpleBusCommandBus/icon.html.twig' with {height: 30} only %}</span>
        <strong>SimpleBus</strong>
    </span>
{% endblock %}

{% block panel %}
    <h2>SimpleBus</h2>

    {% if collector.commands | length > 0 %}
        <h3>Commands</h3>
        <table class="messagelogs inline">
            <tr>
                <th>Timestamp</th>
                <th>Message Class</th>
            </tr>
            {% for messageData in collector.commands %}
                <tr>
                    <td>{{ messageData.timestamp | date('Y-m-d H:i:s') }}</td>
                    <td>{{ messageData.messageClass }}</td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}

    {% if collector.events | length > 0 %}
        <h3>Events</h3>
        <table class="messagelogs inline">
            <tr>
                <th>Timestamp</th>
                <th>Message Class</th>
            </tr>
            {% for messageData in collector.events %}
                <tr>
                    <td>{{ messageData.timestamp | date('Y-m-d H:i:s') }}</td>
                    <td>{{ messageData.messageClass }}</td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}
{% endblock %}
